<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Spotify</title>
    <link rel="stylesheet" href="login/dist/style.css" />
  </head>
  <body>
    <div class="background">
      <div class="account">
        <div class="movebox">
          <!-- Formulario de registro -->
          <form id="registrationForm" method="post">
            <div class="signup">
              <h2>Register here</h2>
              <p class="tarjeta">Username</p>
              <input type="text" name="username" required />
              <p class="tarjeta">Password</p>
              <input type="password" name="password" required />
              <p class="tarjeta">Password again</p>
              <input type="password" name="confirm_password" required />
              <br />
              <br />
              <button type="button" onclick="registerUser()">Registrar</button>
            </div>
          </form>

          <!-- Formulario de inicio de sesión -->
          <div class="login">
            <h2>Inicio de sesion</h2>
            <p class="tarjeta">Username</p>
            <input type="text" name="username" required />
            <p class="tarjeta">Password</p>
            <input type="password" name="password" required />
            <br />
            <br />
            <input type="submit" name="login" value="Login" />
          </div>
        </div>

        <!-- Contenido de "¿No tienes cuenta?" -->
        <div class="content">
          <h2>¿No tienes cuenta?</h2>
          <p>Texto aqui</p>
          <a href="#" class="button to-left">Registrar usuario</a>
          <div class="center">
            <div class="photo-frame">
              <img src="login/img/cody.jpg" alt="Foto" class="photo" />
            </div>
          </div>
        </div>

        <!-- Contenido de "¿Tienes Cuenta?" -->
        <div class="content">
          <h2>¿Tienes Cuenta?</h2>
          <p>Texto aqui</p>
          <a href="#" class="button to-right">Iniciar sesion</a>
          <div class="center">
            <div class="photo-frame">
              <img src="login/img/cody.jpg" alt="Foto" class="photo" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
    <script src="login/dist/script.js"></script>
    <script>
      function registerUser() {
        var username = document.querySelector('input[name="username"]').value;
        var password = document.querySelector('input[name="password"]').value;
        var confirmPassword = document.querySelector(
          'input[name="confirm_password"]'
        ).value;

        // Validar si las contraseñas coinciden
        if (password !== confirmPassword) {
          showMessage("Las contraseñas no coinciden.", "error");
        } else {
          $.ajax({
            type: "POST",
            url: "register.php",
            data: { username: username, password: password },
            success: function (response) {
              showMessage(response.message, response.status);
            },
            error: function () {
              showMessage("Error al procesar la solicitud.", "error");
            },
          });
        }
      }

      function showMessage(message, status) {
        var messageContainer = document.getElementById("messageContainer");
        messageContainer.innerHTML = ""; // Limpiar contenido anterior
        var messageElement = document.createElement("p");
        messageElement.textContent = message;
        messageElement.style.color = status === "success" ? "green" : "red";
        messageContainer.appendChild(messageElement);
      }
    </script>
  </body>
</html>
